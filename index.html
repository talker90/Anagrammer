<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Oswald|Montserrat">

	<title>Medallion Anagrammer V 1.0</title>

	<style type="text/css">

		html {
  			box-sizing: border-box;
		}

		*, *:before, *:after {
  			box-sizing: inherit;
		}

		main {
			display: block;
		}

	</style>
</head>
<body>

  <form>
      Anagram this word:<input type="text" name="t" /> 
      <br>
      Exclude these pat:<input type="text" name="re" /> 
      <br>
    <input type="button" value="Generate anagrams (max 10000)"
      onClick="javascript: rst(); go('', t.value); tout.value=str; console.log('Anagrams: '+cnt);" />
    <br>
    <textarea name="tout" rows=10 cols=40></textarea>
  </form>

<script>
	var dictionary = [
     "apple",
     "banana",
     "orange",
     "pear",
     "watermelon,"
	"dirty room"
   ];

   function isValidWord(word) {
     for(var i = 0, n = dictionary.length; i < n; i++) {
       if(word === dictionary[i]) {
         return true;
       }
     }
     return false;
   }

var str,re,cnt,cntmax;

function rst(){
    cnt=0; cntmax=10000; str="";
    if (document.forms[0].re.value != ""){
        re=new RegExp(document.forms[0].re.value);
    } else { re=null; }
}

function go(prefix, postfix){
    if (cnt>=cntmax) return;
    if (postfix==""){
        if ((re==null || prefix.match(re)==null) && isValidWord(prefix) ){
            str+=prefix+"\r\n"; cnt++;
        }
        return;
    }
    for (var i=0;i<postfix.length;i++){
        var prefix2=prefix+postfix.charAt(i);
        var postfix2=postfix.substring(0,i)+postfix.substring(i+1);
        go(prefix2,postfix2);
    }
}
</script>
	
<script>document.createElement('main');</script>
</body>
</html>
